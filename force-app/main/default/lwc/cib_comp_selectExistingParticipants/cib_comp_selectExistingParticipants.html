<!--
/***************************************************************************************
@ Author            : silva.macaneta@standardbank.co.za
@ Date              : 12-04-2024
@ Name of the Class : Cib_comp_selectExistingParticipants
@ Description       : This class is used to manage the select existing participants screen of the application.
@ Last Modified By  : silva.macaneta@standardbank.co.za
@ Last Modified On  : 12-04-2024
@ Modification Description : SFP-36750
***************************************************************************************/
-->
<template>
  <c-cmn_comp_spinner if:false={isLoaded}></c-cmn_comp_spinner>
  <div class="container mt-2">
    <c-cmn_comp_review-comment
      section={sectionRecord}
    ></c-cmn_comp_review-comment>
    <div class="aob_form_title">
      <h2>Certification Details</h2>
    </div>

    <div class="aob_card-container">
      <div class="slds-grid slds-grid_vertical">
        <div
          class="slds-p-vertical_x-small slds-p-horizontal_large slds-shrink-none slds-theme_shade"
        >
          <div class="slds-form-element">
            <label
              class="slds-form-element__label slds-assistive-text"
              for="example-unique-id-349"
              id="combobox-label-id-40"
              >Search</label
            >
            <div class="slds-form-element__control">
              <div class="slds-combobox_container">
                <div
                  class="slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click"
                >
                  <div
                    class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right"
                    role="none"
                  >
                    <input
                      type="text"
                      class="slds-input slds-combobox__input"
                      id="example-unique-id-349"
                      aria-autocomplete="list"
                      aria-controls="example-unique-id-350"
                      aria-expanded="false"
                      aria-haspopup="listbox"
                      role="combobox"
                      placeholder="Search Participants"
                      onchange={handleSearch}
                    />
                    <span
                      class="slds-icon_container slds-icon-utility-search slds-input__icon slds-input__icon_right"
                    >
                      <svg
                        class="slds-icon slds-icon slds-icon_x-small slds-icon-text-default"
                        aria-hidden="true"
                      >
                        <use
                          xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#search"
                        ></use>
                      </svg>
                    </span>
                  </div>
                  <div
                    id="example-unique-id-350"
                    class="slds-dropdown slds-dropdown_length-5 slds-dropdown_fluid"
                    role="listbox"
                    tabindex="0"
                    aria-busy="false"
                  >
                    <ul
                      class="slds-listbox slds-listbox_vertical"
                      role="presentation"
                    >
                      <li role="presentation" class="slds-listbox__item">
                        <div
                          id="option157"
                          class="slds-media slds-listbox__option slds-listbox__option_plain slds-media_small"
                          role="option"
                        >
                          <span class="slds-media__body">
                            <span class="slds-truncate" title="Option A"
                              >Option A</span
                            >
                          </span>
                        </div>
                      </li>
                      <li role="presentation" class="slds-listbox__item">
                        <div
                          id="option158"
                          class="slds-media slds-listbox__option slds-listbox__option_plain slds-media_small"
                          role="option"
                        >
                          <span class="slds-media__body">
                            <span class="slds-truncate" title="Option B"
                              >Option B</span
                            >
                          </span>
                        </div>
                      </li>
                      <li role="presentation" class="slds-listbox__item">
                        <div
                          id="option159"
                          class="slds-media slds-listbox__option slds-listbox__option_plain slds-media_small"
                          role="option"
                        >
                          <span class="slds-media__body">
                            <span class="slds-truncate" title="Option C"
                              >Option C</span
                            >
                          </span>
                        </div>
                      </li>
                      <li role="presentation" class="slds-listbox__item">
                        <div
                          id="option160"
                          class="slds-media slds-listbox__option slds-listbox__option_plain slds-media_small"
                          role="option"
                        >
                          <span class="slds-media__body">
                            <span class="slds-truncate" title="Option D"
                              >Option D</span
                            >
                          </span>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="slds-text-title slds-m-top_x-small" aria-live="polite">
            {selectedCount} Item(s) Selected
          </div>
        </div>
        <div class="slds-scrollable slds-grow">
          <div class="slds-scrollable_none">
            <table
              aria-multiselectable="true"
              class="slds-table slds-no-row-hover slds-table_bordered slds-table_fixed-layout slds-table_resizable-cols"
              role="grid"
              aria-label="Example product list"
            >
              <thead>
                <tr class="slds-line-height_reset">
                  <th class="" scope="col" style="width: 3.75rem"></th>
                  <th
                    aria-sort="none"
                    class="slds-is-resizable slds-is-sortable"
                    scope="col"
                  >
                    <a
                      class="slds-th__action slds-text-link_reset"
                      href="#"
                      role="button"
                      tabindex="-1"
                    >
                      <span class="slds-assistive-text">Sort by: </span>
                      <div
                        class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate"
                      >
                        <span class="slds-truncate" title="Name">Name</span>
                        <span
                          class="slds-icon_container slds-icon-utility-arrowdown"
                        >
                          <svg
                            class="slds-icon slds-icon-text-default slds-is-sortable__icon"
                            aria-hidden="true"
                          >
                            <use
                              xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown"
                            ></use>
                          </svg>
                        </span>
                      </div>
                    </a>
                    <div class="slds-resizable">
                      <input
                        type="range"
                        aria-label="Name column width"
                        class="slds-resizable__input slds-assistive-text"
                        id="cell-resize-handle-133"
                        max="1000"
                        min="20"
                        tabindex="-1"
                      />
                      <span class="slds-resizable__handle">
                        <span class="slds-resizable__divider"></span>
                      </span>
                    </div>
                  </th>
                  <th
                    aria-sort="none"
                    class="slds-is-resizable slds-is-sortable"
                    scope="col"
                  >
                    <a
                      class="slds-th__action slds-text-link_reset"
                      href="#"
                      role="button"
                      tabindex="-1"
                    >
                      <span class="slds-assistive-text">Sort by: </span>
                      <div
                        class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate"
                      >
                        <span class="slds-truncate" title="Product Code"
                          >Role</span
                        >
                        <span
                          class="slds-icon_container slds-icon-utility-arrowdown"
                        >
                          <svg
                            class="slds-icon slds-icon-text-default slds-is-sortable__icon"
                            aria-hidden="true"
                          >
                            <use
                              xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown"
                            ></use>
                          </svg>
                        </span>
                      </div>
                    </a>
                    <div class="slds-resizable">
                      <input
                        type="range"
                        aria-label="Product Code column width"
                        class="slds-resizable__input slds-assistive-text"
                        id="cell-resize-handle-134"
                        max="1000"
                        min="20"
                        tabindex="-1"
                      />
                      <span class="slds-resizable__handle">
                        <span class="slds-resizable__divider"></span>
                      </span>
                    </div>
                  </th>
                </tr>
              </thead>
              <tbody>
                <template for:each={displayParticipants} for:item="participant" for:index="idx">
                    <tr key={participant.Id} aria-selected="false" class="slds-hint-parent">
                        <td
                        class="slds-text-align_right"
                        role="gridcell"
                        tabindex="0"
                        >
                        <lightning-input
                            type="checkbox-button"
                            id={participant.Id}
                            name={participant.Id}
                            data-fieldname="IsCertifyingOfficial__c"
                            data-participant-sequence={participant.CIB_Sequence__c}
                            data-index={idx}
                            data-id={participant.Id}
                            onchange={onchange}
                            checked={participant.IsCertifyingOfficial__c}
                            value={participant.IsCertifyingOfficial__c}
                            tabindex="-1"
                            ></lightning-input>
                        </td>
                        <th scope="row">
                            <div class="slds-truncate" title={participant.Name}>{participant.Name}</div>
                        </th>
                        <td role="gridcell">
                            <div class="slds-truncate" title={participant.RecordType.Name}>{participant.RecordType.Name}</div>
                        </td>
                    </tr>
                </template>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <c-cib_comp_flow-navigation
      onsave={saveRecord}
      onsubmit={submitRecord}
      onprevious={navigateToPreviousScreen}
    >
    </c-cib_comp_flow-navigation>
  </div>
</template>